<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./index.css">
</head>

<style>
    html {
        font-family: sans-serif;
    }

    .sub-container {
        /* background: red; */
        /* padding: 10px; */
        position: relative;
        overflow-y: scroll;
        height: 30rem;
    }

    .sub-element {
        border: 1px solid #41221bc2;
        border-radius: 4px;
        /* width: 100%; */
        background-color: #e3b424;
        padding: 10px 12px;
        font-size: 18px;
        margin-top: 4px;
        cursor: pointer;
        /* overflow-y: scroll; */
    }

    .sub-element:hover {
        background-color: #b48e1b;
    }

    .result-div {
        padding: 10px 12px;
        font-size: 18px;
        margin-top: 8px;
    }

    .container {
        display: flex;
        justify-content: center;
        padding-top: 8rem;

    }

    input {
        width: -webkit-fill-available;
        background: transparent;
        outline: none;
        border: none;
        border-bottom: 2px solid black;
        padding-bottom: 6px;
        font-size: 2rem;
    }

    input::placeholder {
        color: #e3b424;
    }

    .element-container {
        padding-bottom: 15px;
        border-bottom: 2px dashed black;
        max-height: 12rem;
        /* overflow-y: scroll; */
    }

    .sub-container {
        position: relative;
        /* overflow: hidden; */
        /* height: 100%; */
    }

    .sub-container {
        display: flex;
        flex-direction: column;
        overflow: hidden;
        height: 100%;
        width: 100%;
    }

    .transition-container {
        flex-shrink: 0;
        transform: translateY(0);
        transition: transform 0.5s ease-in-out;
    }

    .translate-up {
        transform: translateY(-100%);
        /* display: none; */
    }

    .translate-in {
        /* transform: translateY(100%);   */
    }
</style>

<body>
    <div
        style="background-image: url('./images/homepage.web');background-position: center;background-repeat: no-repeat;height: 30rem; width: 90%; margin: auto;">

        <div class="container">
            <div style="width: 60%" class="sub-container">
                <div class="transition-container">

                    <div class="input-container">

                        <input type="text" class="userInput" value="" oninput="filter()"
                            placeholder="Type or select an option">
                    </div>
                    <div class="element-container">

                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        const Application = [
            {

                name: "Alpine Mountaineering",
                sizes: [
                    {
                        name: "Average",
                        type: [
                            {
                                type: "Soft",
                                suggestedProduct: "MOUNTAINEER TONGUE DUAL DENSITY 12MM"
                            },
                            {
                                type: "Medium",
                                suggestedProduct: "MOUNTAINEER WRAP DUAL DENSITY 12MM"
                            }
                        ]
                    },
                    {
                        name: "Extra Slim",
                        suggestedProduct: "MOUNTAINEER WRAP DUAL DENSITY 12MM"
                    },
                    {
                        name: "Extra Large",
                        suggestedProduct: "MOUNTAINEER WRAP DUAL DENSITY 12MM"
                    }
                ]
            },
            {
                name: "Alpine Sky Touring",
                sizes: [
                    {
                        name: "Average",
                        stiffness: [
                            {
                                type: "Extra Soft",
                                suggestedProduct: "WINTER BOOT LOW DENSITY 12MM"
                            },
                            {
                                type: "Soft",
                                thickness: [
                                    { thickness: "1 finger or less - 9mm", suggestedProduct: "TOUR WRAP DUAL DENSITY 9MM" },
                                    { thickness: "1-2 fingers - 12mm", suggestedProduct: "TOUR TONGUE DUAL DENSITY 12MM" },
                                    { thickness: "2 fingers or more - 15mm", suggestedProduct: "TOUR TONGUE DUAL DENSITY 15MM" },
                                ]
                            },
                            {
                                type: "Medium",
                                thickness: [
                                    { thickness: "1 finger or less - 9mm", suggestedProduct: "TOUR WRAP DUAL DENSITY 9MM" },
                                    { thickness: "1-2 fingers - 12mm", suggestedProduct: "TOUR WRAP DUAL DENSITY 12MM" },
                                ]
                            }
                        ]
                    },
                    {
                        name: "Extra Slim",
                        thickness: [
                            {
                                thickness: "1 finger or less - 9mm",
                                suggestedProduct: "TOUR WRAP DUAL DENSITY 9MM"
                            },
                            {
                                thickness: "1-2 fingers - 12mm",
                                suggestedProduct: "TOUR WRAP DUAL DENSITY 12MM"
                            }
                        ]
                    },
                    {
                        name: "Extra Large",
                        thickness: [
                            {
                                thickness: "1 finger or less - 9mm",
                                suggestedProduct: "TOUR WRAP DUAL DENSITY 9MM"
                            },
                            {
                                thickness: "1-2 fingers - 12mm",
                                suggestedProduct: "TOUR WRAP DUAL DENSITY 12MM"
                            }
                        ]
                    }
                ]

            },
            {
                name: "Downhill Skiing",
                sizes: [
                    {
                        name: "Extra Slim",
                        stiffness: [
                            {
                                type: "Medium",
                                suggestedProduct: "MOUNTAINEER TONGUE DUAL DENSITY 12MM"
                            },
                            {
                                type: "Extra stiff",
                                thickness: [
                                    { thickness: "1 finger or less - 9mm", suggestedProduct: "DOWNHILL WRAP HIGH DENSITY 9MM" },
                                    { thickness: "1-2 fingers - 12mm", suggestedProduct: "DOWNHILL WRAP HIGH DENSITY 12MM" },
                                    { thickness: "2 fingers or more - 15mm", suggestedProduct: "DOWNHILL WRAP HIGH DENSITY 15MM" },

                                ]
                            }
                        ],
                    },
                    {
                        name: "Average",
                        type: [
                            {
                                type: "Extra Soft",
                                suggestedProduct: "WINTER BOOT LOW DENSITY 12MM"
                            },
                            {
                                type: "Soft",
                                thickness: [
                                    { thickness: "1 finger or less - 9mm", suggestedProduct: "TOUR TONGUE DUAL DENSITY 9MM" },
                                    { thickness: "1-2 fingers - 12mm", suggestedProduct: "TOUR TONGUE DUAL DENSITY 12MM" },
                                    { thickness: "2 fingers or more - 15mm", suggestedProduct: "TOUR TONGUE DUAL DENSITY 15MM" },

                                ]

                            },
                            {
                                type: "Medium",
                                thickness: [
                                    { thickness: "1 finger or less - 9mm", suggestedProduct: "DOWNHILL TONGUE DUAL DENSITY 9MM" },
                                    { thickness: "1-2 fingers - 12mm", suggestedProduct: "DOWNHILL TONGUE DUAL DENSITY 12MM" },
                                    { thickness: "2 fingers or more - 15mm", suggestedProduct: "DOWNHILL TONGUE DUAL DENSITY 15MM" },

                                ]
                            },
                            {
                                type: "Stiff",
                                thickness: [
                                    { thickness: "1 finger or less - 9mm", suggestedProduct: "DOWNHILL TONGUE HIGH DENSITY 9MM" },
                                    { thickness: "1-2 fingers - 12mm", suggestedProduct: "DOWNHILL TONGUE HIGH DENSITY 12MM" },

                                ]
                            },
                            {
                                type: "Extra Stiff",
                                thickness: [
                                    { thickness: "1 finger or less - 9mm", suggestedProduct: "DOWNHILL WRAP HIGH DENSITY 9MM" },
                                    { thickness: "1-2 fingers - 12mm", suggestedProduct: "DOWNHILL WRAP HIGH DENSITY 12MM" },
                                    { thickness: "2 fingers or more - 15mm", suggestedProduct: "DOWNHILL WRAP HIGH DENSITY 15MM" },

                                ]
                            }
                        ]
                    },
                    {

                        name: "Extra large",
                        stiffness: [
                            {
                                type: "Medium",
                                suggestedProduct: "TOUR WRAP DUAL DENSITY 9MM"
                            },
                            {
                                type: "Extra Stiff",
                                thickness: [
                                    { thickness: "1 finger or less - 9mm", suggestedProduct: "DOWNHILL WRAP HIGH DENSITY 9MM" },
                                    { thickness: "1-2 fingers - 12mm", suggestedProduct: "DOWNHILL WRAP HIGH DENSITY 12MM" },
                                    { thickness: "2 fingers or more - 15mm", suggestedProduct: "DOWNHILL WRAP HIGH DENSITY 15xMM" },
                                ]
                            },



                        ]
                    }

                ]

            },
            {
                name: "Downhill Snowboarding",
                sizes: [
                    {
                        name: "Extra Slim",
                        stiffness: [
                            {
                                type: "Extra Stiff",
                                thickness: [
                                    { thickness: "1 finger or less - 9mm", suggestedProduct: "DOWNHILL WRAP HIGH DENSITY 9MM" },
                                    { thickness: "1-2 fingers - 12mm", suggestedProduct: "DOWNHILL WRAP HIGH DENSITY 12MM" },
                                    { thickness: "2 fingers or more - 15mm", suggestedProduct: "DOWNHILL WRAP HIGH DENSITY 15MM" }
                                ]
                            },
                            {
                                type: "Medium",
                                suggestedProduct: "TOUR WRAP DUAL DENSITY 9MM"
                            }
                        ]
                    },


                    {
                        name: "Average",
                        stiffness: [
                            {
                                type: "Extra Soft",
                                suggestedProduct: "WINTER BOOT LOW DENSITY 12MM"
                            },
                            {
                                type: "Soft",
                                thickness: [
                                    { thickness: "1 finger or less - 9mm", suggestedProduct: "TOUR TONGUE DUAL DENSITY 9MM" },
                                    { thickness: "1-2 fingers - 12mm", suggestedProduct: "TOUR TONGUE DUAL DENSITY 12MM" },
                                    { thickness: "2 fingers or more - 15mm", suggestedProduct: "TOUR TONGUE DUAL DENSITY 15MM" },

                                ]

                            },
                            {
                                type: "Medium",
                                thickness: [
                                    { thickness: "1 finger or less - 9mm", suggestedProduct: "DOWNHILL TONGUE DUAL DENSITY 9MM" },
                                    { thickness: "1-2 fingers - 12mm", suggestedProduct: "DOWNHILL TONGUE DUAL DENSITY 12MM" },
                                    { thickness: "2 fingers or more - 15mm", suggestedProduct: "DOWNHILL TONGUE DUAL DENSITY 15MM" },

                                ]
                            },
                            {
                                type: "Stiff",
                                thickness: [
                                    { thickness: "1 finger or less - 9mm", suggestedProduct: "DOWNHILL TONGUE HIGH DENSITY 9MM" },
                                    { thickness: "1-2 fingers - 12mm", suggestedProduct: "DOWNHILL TONGUE HIGH DENSITY 12MM" },

                                ]
                            },
                            {
                                type: "Extra Stiff",
                                thickness: [
                                    { thickness: "1 finger or less - 9mm", suggestedProduct: "DOWNHILL WRAP HIGH DENSITY 9MM" },
                                    { thickness: "1-2 fingers - 12mm", suggestedProduct: "DOWNHILL WRAP HIGH DENSITY 12MM" },
                                    { thickness: "2 fingers or more - 15mm", suggestedProduct: "DOWNHILL WRAP HIGH DENSITY 15MM" },

                                ]
                            }
                        ]
                    },
                    {

                        name: "Extra large",
                        stiffness: [
                            {
                                type: "Medium",
                                suggestedProduct: "TOUR WRAP DUAL DENSITY 9MM"
                            },
                            {
                                type: "Extra Stiff",
                                thickness: [
                                    { thickness: "1 finger or less - 9mm", suggestedProduct: "DOWNHILL WRAP HIGH DENSITY 9MM" },
                                    { thickness: "1-2 fingers - 12mm", suggestedProduct: "DOWNHILL WRAP HIGH DENSITY 12MM" },
                                    { thickness: "2 fingers or more - 15mm", suggestedProduct: "DOWNHILL WRAP HIGH DENSITY 15xMM" },
                                ]
                            },



                        ]
                    }
                ]

            },
            {
                name: "Fat Tire Cycling"
            },
            {
                name: "Ice Climbing"
            },
            //         {
            //             name:"Inline Skating"
            //         },
            //         {
            //             name:"Skimo"
            //         },
            //         {
            //             name:"Splitboarding"
            //         },

            //         {
            //             name:"Telemark Skiing"
            //         },
            //         {
            //             name:"Waterskiing"
            //         },

            //         {
            //             name:"Winter Boots"
            //   }


        ];

        const container = document.getElementById("container");
        let input = document.querySelector(".userInput")
        Application.forEach((application) => {
            const companyContainer = document.querySelector(".element-container");
            companyContainer.style.overflowY = 'scroll';
            const input = document.querySelector(".userInput");
           
            const subElement = document.createElement("div");
            subElement.classList.add("sub-element");
            subElement.textContent = application.name;

            subElement.addEventListener("click", () => {
                input.value = application.name
                const currentComponent = document.querySelector(".transition-container");
                setTimeout(() => {

                    currentComponent.innerHTML = ""
                    handleNested(application)
                    checkOverflow();


                }, 200)

            });
            companyContainer.appendChild(subElement);
            console.log(application)

        });

        function handleNested(item) {

            Object.entries(item).forEach(([key, value]) => {
                if (Array.isArray(value)) {
                    renderArray(value)

                } else if (typeof value === "object" && value !== null) {

                    renderArray(value)
                    console.log(value)
                } else {
                    if (key === "suggestedProduct") {
                        const subContainer = document.getElementsByClassName("sub-container")[0]

                        subContainer.innerHTML = ""
                        const subElement = document.createElement("div");
                        subElement.classList.add("result-div");
                        subElement.textContent = `${value}`;
                        subContainer.appendChild(subElement);
                    }
                }
            });
        }

        function renderArray(array) {

            const subContainer = document.getElementsByClassName("sub-container")[0]; //  first sub-container
            const transitionContainer = document.createElement("div");
            transitionContainer.innerHTML = ""
            // transitionContainer.classList.add("transition-container");

            const inputContainer = document.createElement("div");
            const elementContainer = document.createElement("div");
            elementContainer.classList.add("element-container");
            inputContainer.classList.add("input-container");

            const inputElement = document.createElement("input");
            inputElement.type = "text";
            inputElement.classList.add("userInput");
            inputElement.value = "";
            inputElement.placeholder = "Type or select an option";
            inputElement.addEventListener("input", filter);

            inputContainer.appendChild(inputElement);
            transitionContainer.appendChild(inputContainer);
            transitionContainer.appendChild(elementContainer);
            subContainer.appendChild(transitionContainer)
            array.forEach((item) => {

                const subElement = document.createElement("div");
                subElement.classList.add("sub-element");
                subElement.textContent = item.name || item.type || item.thickness || item.stiffness || "View Details";

                subElement.addEventListener("click", () => {
                    
                    inputElement.value = item.name || item.type || item.thickness || item.stiffness || "";
                    setTimeout(() => {
                        
                        transitionContainer.innerHTML = ""
                        
                        handleNested(item);
                        
                        checkOverflow();
                    }, 100);



                });


                elementContainer.appendChild(subElement);

            });


        }

        
        function checkOverflow() {
    const getHeightContainer = document.querySelector('.element-container');
    if (!getHeightContainer) {
        console.error("Element with class 'element-container' not found.");
        return;
    }

    const children = getHeightContainer.children;
    const totalHeight = Array.from(children).reduce((acc, child) => acc + child.offsetHeight, 0);

    if (totalHeight > getHeightContainer.offsetHeight) {
        getHeightContainer.style.overflowY = 'scroll';
        console.log("scroll applied");
    } else {
        getHeightContainer.style.overflowY = 'hidden';
        console.log("hidden applied");
    }
}


        function filter() {
            const userValue = document.getElementsByClassName("userInput").value;
            const items = document.querySelectorAll(".sub-element");
            items.forEach((item) => {
                const singleLiText = item.innerText.toLowerCase();
                if (singleLiText.indexOf(userValue) === -1) {
                    console.log("no matchde value")
                } else {
                    console.log(item)
                }
            })
        }
        console.log(Application)

    </script>
</body>

</html>